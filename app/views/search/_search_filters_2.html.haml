- content_for :head do
  %link{href: "https://cdn.jsdelivr.net/npm/choices.js@9.0.1/public/assets/styles/choices.min.css", rel: "stylesheet"}

.search-filters-2
  = search_form_for @q, data: { controller: "autosubmit", target: "autosubmit.form", action: "ajax:success->autosubmit#success ajax:error->autosubmit#error" }, remote: true do |f|
    .search-filters-container

      .filter-by-capacity{data: { controller: "capacity-slider", action: "click->dropdown#toggle click@window->dropdown#hide", "capacity-slider-minimum" => "1", "capacity-slider-maximum" => "600" }}
        %div
          %i.fas.fa-users
          %span#minimum-capacity-value{data: {target: "capacity-slider.minimum capacity-slider.slider" }}
            1
          %span -
          %span#minimum-capacity-value{data: {target: "capacity-slider.maximum" }}
            600
        %i.fas.fa-chevron-down

        .dropdown-content.hidden{data: { target: "dropdown.menu" }}

          .capacity-sliders.tooltip.tooltip-capacity-top{data: {tooltip: "Only show rooms with a capacity between X and Y" }}
            .filters-section-header.mb-4 Student Capacity

            #slider
            = f.hidden_field :instructional_seating_count_gteq, {data: {target: "capacity-slider.minimum" }}
            = f.hidden_field :instructional_seating_count_lteq, {data: {target: "capacity-slider.maximum" }}

            -# #reset-slider
              Reset


      .filter-by-building
        .search-field-container
          .search-field-icon.relative
            .search-field-svg
              %svg.h-4.w-4.fill-current.text-blue-600.z-50{viewbox: "0 0 448 512", xmlns: "http://www.w3.org/2000/svg"}
                %path{d: "M436 480h-20V24c0-13.255-10.745-24-24-24H56C42.745 0 32 10.745 32 24v456H12c-6.627 0-12 5.373-12 12v20h448v-20c0-6.627-5.373-12-12-12zM128 76c0-6.627 5.373-12 12-12h40c6.627 0 12 5.373 12 12v40c0 6.627-5.373 12-12 12h-40c-6.627 0-12-5.373-12-12V76zm0 96c0-6.627 5.373-12 12-12h40c6.627 0 12 5.373 12 12v40c0 6.627-5.373 12-12 12h-40c-6.627 0-12-5.373-12-12v-40zm52 148h-40c-6.627 0-12-5.373-12-12v-40c0-6.627 5.373-12 12-12h40c6.627 0 12 5.373 12 12v40c0 6.627-5.373 12-12 12zm76 160h-64v-84c0-6.627 5.373-12 12-12h40c6.627 0 12 5.373 12 12v84zm64-172c0 6.627-5.373 12-12 12h-40c-6.627 0-12-5.373-12-12v-40c0-6.627 5.373-12 12-12h40c6.627 0 12 5.373 12 12v40zm0-96c0 6.627-5.373 12-12 12h-40c-6.627 0-12-5.373-12-12v-40c0-6.627 5.373-12 12-12h40c6.627 0 12 5.373 12 12v40zm0-96c0 6.627-5.373 12-12 12h-40c-6.627 0-12-5.373-12-12"}

            .search-input= f.select :facility_code_heprod_or_room_number_or_building_name_or_building_nick_name_or_building_abbreviation_in, @searchable_buildings, {}, {multiple: true, placeholder: "Search by Buidling", data: {controller: "choices", target: "choices.choice", action: "autosubmit#change"}}

      .filter-by-school-or-college
        .search-field-container
          .search-field-icon.relative
            .search-field-svg

              %svg.h-6.w-6.fill-current.text-blue-600.z-50{viewbox: "0 0 640 512", xmlns: "http://www.w3.org/2000/svg"}
                %path{d: "M622.34 153.2L343.4 67.5c-15.2-4.67-31.6-4.67-46.79 0L17.66 153.2c-23.54 7.23-23.54 38.36 0 45.59l48.63 14.94c-10.67 13.19-17.23 29.28-17.88 46.9C38.78 266.15 32 276.11 32 288c0 10.78 5.68 19.85 13.86 25.65L20.33 428.53C18.11 438.52 25.71 448 35.94 448h56.11c10.24 0 17.84-9.48 15.62-19.47L82.14 313.65C90.32 307.85 96 298.78 96 288c0-11.57-6.47-21.25-15.66-26.87.76-15.02 8.44-28.3 20.69-36.72L296.6 284.5c9.06 2.78 26.44 6.25 46.79 0l278.95-85.7c23.55-7.24 23.55-38.36 0-45.6zM352.79 315.09c-28.53 8.76-52.84 3.92-65.59 0l-145.02-44.55L128 384c0 35.35 85.96 64 192 64s192-28.65 192-64l-14.18-113.47-145.03 44.56z"}

            .search-input
              = f.select :dept_grp_in, [['Academic and Budget Affairs', 'ACAD_&_BDGT_AFFAIRS'],['College of LSA','COLLEGE_OF_LSA'], ['College of Pharmacy','COLLEGE_PHARMACY'], ['Ford School of Public Policy', 'SCHOOL_PUB_POLICY'],['Law School', 'LAW_SCHOOL'], ['Museum of Art', 'VP_ACAD_GRAD_STUDY'],['Ross School of Business' ,'SCHOOL_BUS_ADMIN'], ['School of Dentistry', 'SCHOOL_DENTISTRY'],['School of Education', 'SCHOOL_EDUCATION'], ['School of Information', 'SCHOOL_INFORMATION'], ['School of Kinesiology', 'SCHOOL_KINESIOLOGY'],['School for Environment and Sustainability','SCHOOL_NAT_RES_ENVIR'],['School of Nursing','SCHOOL_NURSING'], ['School of Music, Theatre and Dance','SCHOOL_MUSIC'], ['School of Public Health', 'SCHOOL_PUB_HEALTH'],['School of Social Work', 'SCHOOL_SOCIAL_WORK']], {}, {multiple: true, data: {controller: "choices", target: "choices.choice", action: "autosubmit#change"}}



        -# .search-field-container
        -#   .flex.justify-between.py-3
        -#     .search-field-icon.relative
        -#       .absolute.inset-y-0.left-0.flex.items-center.pl-1
        -#         %svg.h-6.w-6.fill-current.text-gray-600{:fill => "none", :viewbox => "0 0 24 24", :xmlns => "http://www.w3.org/2000/svg"}
        -#           %path{:d => "M16.32 14.9l1.1 1.1c.4-.02.83.13 1.14.44l3 3a1.5 1.5 0 0 1-2.12 2.12l-3-3a1.5 1.5 0 0 1-.44-1.14l-1.1-1.1a8 8 0 1 1 1.41-1.41l.01-.01zM10 16a6 6 0 1 0 0-12 6 6 0 0 0 0 12z"}

        -#     .search-input= f.search_field :facility_code_heprod_or_room_number_or_building_name_or_building_nick_name_or_building_abbreviation_cont, class: '', "aria-describedby" => "Search by building name or nick name", "aria-label" => "Search by building name or nick name", :placeholder => "Search by building name or nick name", :type => "text", data: { action: "keyup->autosubmit#save" }

        .matches
          = @results.size
          = "#{ pluralize_without_count(@results.size, 'Match')}"

        %span.text-muted{data: {target: "autosubmit.status" }}

    .additional-filters{data: {controller: "toggle"  }}
      .buttons
        - if current_user
          .additional-filters-button{data: { action: "click->toggle#filtertoggle touch->toggle#filtertoggle"}}
            %svg.h-6.w-6.fill-current{:viewbox => "0 0 512 512", :xmlns => "http://www.w3.org/2000/svg", data: {target: "toggle.filters" } }
              %path{:d => "M504 384H192v-40c0-13.3-10.7-24-24-24h-48c-13.3 0-24 10.7-24 24v40H8c-4.4 0-8 3.6-8 8v16c0 4.4 3.6 8 8 8h88v40c0 13.3 10.7 24 24 24h48c13.3 0 24-10.7 24-24v-40h312c4.4 0 8-3.6 8-8v-16c0-4.4-3.6-8-8-8zm-344 64h-32v-96h32v96zM504 96H256V56c0-13.3-10.7-24-24-24h-48c-13.3 0-24 10.7-24 24v40H8c-4.4 0-8 3.6-8 8v16c0 4.4 3.6 8 8 8h152v40c0 13.3 10.7 24 24 24h48c13.3 0 24-10.7 24-24v-40h248c4.4 0 8-3.6 8-8v-16c0-4.4-3.6-8-8-8zm-280 64h-32V64h32v96zm280 80h-88v-40c0-13.3-10.7-24-24-24h-48c-13.3 0-24 10.7-24 24v40H8c-4.4 0-8 3.6-8 8v16c0 4.4 3.6 8 8 8h312v40c0 13.3 10.7 24 24 24h48c13.3 0 24-10.7 24-24v-40h88c4.4 0 8-3.6 8-8v-16c0-4.4-3.6-8-8-8zm-120 64h-32v-96h32v96z"}

            %svg.h-6.w-6.fill-current.hidden{:viewbox => "0 0 512 512", :xmlns => "http://www.w3.org/2000/svg", data: {target: "toggle.filters" }}
              %path{:d => "M160 168v-48c0-13.3-10.7-24-24-24H96V8c0-4.4-3.6-8-8-8H72c-4.4 0-8 3.6-8 8v88H24c-13.3 0-24 10.7-24 24v48c0 13.3 10.7 24 24 24h40v312c0 4.4 3.6 8 8 8h16c4.4 0 8-3.6 8-8V192h40c13.3 0 24-10.7 24-24zm-32-8H32v-32h96v32zm152 160h-40V8c0-4.4-3.6-8-8-8h-16c-4.4 0-8 3.6-8 8v312h-40c-13.3 0-24 10.7-24 24v48c0 13.3 10.7 24 24 24h40v88c0 4.4 3.6 8 8 8h16c4.4 0 8-3.6 8-8v-88h40c13.3 0 24-10.7 24-24v-48c0-13.3-10.7-24-24-24zm-8 64h-96v-32h96v32zm152-224h-40V8c0-4.4-3.6-8-8-8h-16c-4.4 0-8 3.6-8 8v152h-40c-13.3 0-24 10.7-24 24v48c0 13.3 10.7 24 24 24h40v248c0 4.4 3.6 8 8 8h16c4.4 0 8-3.6 8-8V256h40c13.3 0 24-10.7 24-24v-48c0-13.3-10.7-24-24-24zm-8 64h-96v-32h96v32z"}

            %span.ml-2 Additional Filters


        .sort-options{data: {controller: "toggle", action: "click->toggle#sortToggle touch->toggle#sortToggle"}}
          %i.fas.fa-sort-amount-down
          Sort
          .sort-options-selections.hidden{data: {target: "toggle.sort"}}
            .sort-by-capacity
              = sort_link(@q, :instructional_seating_count) do
                Capacity

            .sort-by-room-number
              = sort_link(@q, :room_number) do
                Room number

      .filters-container.hidden{data: {target: "toggle.filters" }}

        .classroom-amenities
          %span.filters-section-header Amenities
          .characteristics-arrangement

            .filter-item-label
              = check_box_tag "instructor_computer", :instructor_computer, params[:instructor_computer].try(:include?, 'instructor_computer'),  {class: 'form-checkbox', data: { action: "autosubmit#checkboxSubmit"} }
              %span Instrutor Computer

            .filter-item-label
              = check_box_tag "doccam", :doccam, params[:doccam].try(:include?, 'doccam'),  {class: 'form-checkbox', data: { action: "autosubmit#checkboxSubmit"} }
              %span Document Camera

            .filter-item-label
              = check_box_tag "lecture_capture", :lecture_capture, params[:lecture_capture].try(:include?, 'lecture_capture'),  {class: 'form-checkbox', data: { action: "autosubmit#checkboxSubmit"} }
              %span Lecture Capture

            .filter-item-label
              = check_box_tag "video_conf", :video_conf, params[:video_conf].try(:include?, 'video_conf'),  {class: 'form-checkbox', data: { action: "autosubmit#checkboxSubmit"} }
              %span Video Conferencing

            .filter-item-label
              = check_box_tag "interactive_screen", :interactive_screen, params[:interactive_screen].try(:include?, 'interactive_screen'),  {class: 'form-checkbox', data: { action: "autosubmit#checkboxSubmit"} }
              %span Interactive Screen

            .filter-item-label
              = check_box_tag "bluray", :bluray, params[:bluray].try(:include?, 'bluray'),  {class: 'form-checkbox', data: { action: "autosubmit#checkboxSubmit"} }
              %span{:class => "sm:w-full"} BluRay / DVD Player


        -# .stacked-filters
        .classroom-type
          %span.filters-section-header Team Learning
          .characteristics-arrangement

            .filter-item-label

              = check_box_tag "team_board", :team_board, params[:team_board].try(:include?, 'team_board'),  {class: 'form-checkbox', data: { action: "autosubmit#checkboxSubmit"} }
              %span Team Board

            .filter-item-label
              = check_box_tag "team_tables", :team_tables, params[:team_tables].try(:include?, 'team_tables'),  {class: 'form-checkbox', data: { action: "autosubmit#checkboxSubmit"} }
              %span Team Tables

            .filter-item-label
              = check_box_tag "team_technology", :team_technology, params[:team_technology].try(:include?, 'team_technology'),  {class: 'form-checkbox', data: { action: "autosubmit#checkboxSubmit"} }
              %span Team Technology

        .writing-surface
          %span.filters-section-header Writing Surface
          .characteristics-arrangement{:class => "sm:w-full "}
            .filter-item-label
              = check_box_tag "whiteboard", :whiteboard, params[:whiteboard].try(:include?, 'whiteboard'),  {class: 'form-checkbox', data: { action: "autosubmit#checkboxSubmit"} }
              %span Whiteboard

            .filter-item-label
              = check_box_tag "chalkboard", :chalkboard, params[:chalkboard].try(:include?, 'chalkboard'),  {class: 'form-checkbox', data: { action: "autosubmit#checkboxSubmit"} }
              %span Chalkboard
        %div{:class => "flex flex-col inline-block lg:border-l lg:border-blue-900 xl:border-l-0"}
          .projection-type
            %span.filters-section-header Projection
            .characteristics-arrangement
              .filter-item-label
                = check_box_tag "projector_35mm", :projector_35mm, params[:projector_35mm].try(:include?, 'projector_35mm'),  {class: 'form-checkbox', data: { action: "autosubmit#checkboxSubmit"} }
                %span 35mm Film

              .filter-item-label
                = check_box_tag "projector_digital_cinema", :projector_digital_cinema, params[:projector_digital_cinema].try(:include?, 'projector_digital_cinema'),  {class: 'form-checkbox', data: { action: "autosubmit#checkboxSubmit"} }
                %span Digital Cinema (DCP)

              .filter-item-label
                = check_box_tag "projector_digial", :projector_digial, params[:projector_digial].try(:include?, 'projector_digial'),  {class: 'form-checkbox', data: { action: "autosubmit#checkboxSubmit"} }
                %span Digital Data & Video

              .filter-item-label
                = check_box_tag "projector_slide", :projector_slide, params[:projector_slide].try(:include?, 'projector_slide'),  {class: 'form-checkbox', data: { action: "autosubmit#checkboxSubmit"} }
                %span Slide Projector
